# Лабораторная работа 2
## Вариант: M

* **Цель:** Написать мини-оболочку с файловыми командами на Python
* **Библиотеки:** *os*, *shutil*, *logging*, *datetime*, *stat*, *tarfile*, *ast*, *zipfile*
* **Допущения:**
  - Пути к файлам должны писаться через "/"
  - Запрещено менять файлы любыми путями, кроме самой мини-оболочкой и её командами
  - Относительные пути должны быть прописанны именно от текущеё директории мини-оболочки
  - Сам путь системы при запуске должен быть в каталоге лабораторной работы `python_lab2`
  - У мини-оболочки нету доступа к файлам с ограниченным доступом
  - Мини-оболочка может не видеть скрытые файлы или каталоги
  - Работа с архивами рекомендуется только для архивов, созданных командами данной оболочки
  - Undo доступен только для команд `cp`, `mv`, `rm`
  - Любые вводимые команды должны соответсвовать данным шаблонам ввода

* **Чему я научился:**
    - Написание тестов для функций, работающих с файлами
    - Логирование действий через logging
    - Работа с файлами и путями

### Алгоритм решения
  1. Вывод текущего пути мини-оболочки и места для ввода команды
  2. Пользователь вводит команду с её аргументами
  3. Программа проводит базовую валидацию входных данных на правильное число аргументов
  4. Запускается соответствующая функция с переданными данными
  5. Происходит разделение данных внутри функции: опции, пути и паттерны
  6. Выполняются соответствующие действия для каждой команды:
        - `ls <option> <path>`:
          - Отображение списка файлов и каталогов в текущем рабочем каталоге
          - Поддержка аргумента path (относительный или абсолютный путь)
          - Поддержка опции –1 для подробного отображения (имя, тип, размер, дата изменения, права доступа)
          - **Работа**: При помощи `listdir()` получает все названия файлов в текущей директории и выводит их. При использовании "-l" при помощи `scandir()` получает данные по файлам в текущей директории и при помощи `stats()` получает метаданные по файлам и добаляет их последовательно в список, после чего выводит их.
        - `cd <path>`:
          - Переход в указанный каталог
          - Поддержка .. для перехода на уровень выше
          - Поддержка для перехода в домашний каталог
          - **Работа**: При помощи *кастомной* функции `check_path()` обрабатывает соответствующий случай пути (абсолютный, относительный, ошибки) и передаёт его переменной текущего каталога мини-оболочки `current_path`
  9. После выполнения функции происходит логирование ввода пользователя или ошибка
  10. Возврат к шагу 1 (или выход из системы при вводе `q`)

## Интересные тест-кейсы
 - По умолчанию несуществующую директорию считает за новую
 - При копировании файла или распаковывании архвива, если уже существует файл, то его не заменяет
 - Может создать .txt директорию
 - В большинстве случаев не может работать с директориями без -r опции
 - На вход в функции передаётся именно список, так что проблем с пробелами нету
 - Ошибки ввода в основном тестятся в main, так как часто они довольно похожи

## Инструкция к использованию
```запустить мини-оболчку``` \
```ввести команду``` \
```при необходимости выйти при помощи "q"```

**Лучше не работать с важными файлами, для этого существует каталог `testing_dir`**

### Установить репозиторий
```pip install -e git+https://github.com/ToombaYoomba/python_lab2``` \
```cd python_lab2```

### Запустить
```py -m src.main```

### Синтаксис
* Для определения пути в качесве разделителя используется "/"
* Дополнительные опции для команд пишутся перед их содержимым
* Относительный путь только от каталога мини-оболочки
* Использование кавычек `"` / `'` не рекомендуется и не учитывается большинством функций
* В пути к файлу не допускаются множественные `/` и пробелы
